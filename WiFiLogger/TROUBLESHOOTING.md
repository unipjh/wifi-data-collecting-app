# WiFi Logger 문제 해결 가이드 (v2.1)

앱 사용 중 문제가 발생하면 아래 해결 방법을 참고하세요.

## 🚨 버튼이 이상하게 작동해요 (버튼 로직 꼬임)

**증상:**
- "측정 시작"을 눌렀는데 서비스가 시작되지 않고 UI만 바뀝니다.
- "측정 중지"를 눌렀는데 오히려 서비스가 시작됩니다.

**원인:**
서비스의 실제 상태와 화면의 UI 상태가 동기화되지 않아 발생하는 문제입니다.

**해결 방법:**
이 문제는 **v2.1**에서 해결되었습니다. 최신 버전의 코드를 사용하고 있는지 확인하세요. `MainActivity.kt`의 `onResume()`과 `onPause()`에서 UI 업데이트를 제어하는 로직이 올바르게 구현되어 있어야 합니다.

```kotlin
// MainActivity.kt
override fun onResume() {
    super.onResume()
    startUIUpdate() // UI 업데이트 시작
}

override fun onPause() {
    super.onPause()
    stopUIUpdate() // UI 업데이트 중지
}
```

## 📶 데이터 수집 문제

### 1. 데이터 수집이 3초보다 훨씬 느려요

**증상:**
- 데이터 수집 간격이 3초를 초과합니다. (예: 5~6초)
- CSV 파일의 `timestamp` 값의 차이가 3000ms보다 훨씬 큽니다.

**원인:**
Ping 측정에 시간이 너무 오래 걸리기 때문입니다.

**해결 방법:**
이 문제는 **v2.1**에서 Ping 측정 로직을 최적화하여 해결했습니다. `WifiDataCollector.kt`의 `measurePing()` 함수가 다음과 같이 수정되었는지 확인하세요.

- **Ping 대상**: `8.8.8.8` (Google DNS) 또는 `1.1.1.1` (Cloudflare DNS)
- **타임아웃**: `1000`ms (1초)

### 2. Ping 값이 항상 -1로 나와요

**원인:**
- 디바이스가 인터넷에 연결되어 있지 않습니다.
- 방화벽이나 보안 앱이 Ping (ICMP) 요청을 차단하고 있을 수 있습니다.

**해결 방법:**
1.  WiFi가 인터넷에 정상적으로 연결되었는지 확인하세요.
2.  보안 관련 앱(VPN, 방화벽 등)을 잠시 비활성화하고 테스트해보세요.

### 3. GPS 위치가 항상 0.0으로 나와요

**원인:**
- 위치(GPS) 서비스가 비활성화되어 있습니다.
- 앱에 위치 권한이 부여되지 않았습니다.
- 실내에서는 GPS 신호를 수신하기 어렵습니다.

**해결 방법:**
1.  디바이스의 **위치 서비스를 활성화**하세요.
2.  **앱 설정 > 권한**에서 위치 권한이 **"항상 허용"** 또는 **"앱 사용 중에만 허용"**으로 설정되었는지 확인하세요.
3.  GPS 수신이 잘 되는 실외나 창가에서 테스트해보세요.

## 💾 CSV 파일 저장 문제

**증상:**
- "지금 저장"을 눌러도 파일이 생성되지 않습니다.
- 30분이 지나도 자동 저장이 되지 않습니다.

**원인:**
- 저장소 접근 권한이 없습니다. (Android 9 이하)
- 디바이스의 저장 공간이 부족합니다.

**해결 방법:**
1.  **앱 설정 > 권한**에서 **저장 공간(또는 파일 및 미디어)** 권한이 허용되었는지 확인하세요.
2.  디바이스의 남은 저장 공간을 확인하고 불필요한 파일을 삭제하세요.

## 🔋 백그라운드 실행 문제

**증상:**
- 앱을 백그라운드로 전환하거나 화면을 끄면 몇 분 후 측정이 중단됩니다.
- 알림바의 서비스 알림이 사라집니다.

**원인:**
Android 시스템의 배터리 최적화 기능이 앱의 백그라운드 동작을 강제로 중지시키기 때문입니다. (특히 삼성, 샤오미, 화웨이 등)

**해결 방법:**
**배터리 최적화 제외** 설정이 필수적입니다.

1.  **설정 > 애플리케이션 > WiFi Logger**로 이동합니다.
2.  **배터리** 메뉴를 선택합니다.
3.  **"배터리 사용량 최적화"** 또는 **"배터리 관리"**와 같은 메뉴에서 WiFi Logger 앱을 찾아 **"최적화하지 않음"** 또는 **"제한 없음"**으로 변경합니다.
    *   (디바이스 제조사마다 메뉴 이름이 다를 수 있습니다.)

## 🛠️ Gradle 빌드 오류

**증상:**
- `Incompatible Java and Gradle version` 등의 메시지와 함께 빌드가 실패합니다.

**해결 방법:**
1.  **Android Studio 캐시 삭제**: `File > Invalidate Caches / Restart...`를 선택하여 캐시를 비우고 재시작하는 것이 가장 효과적입니다.
2.  **JDK 버전 확인**: `File > Settings > Build, Execution, Deployment > Build Tools > Gradle`에서 `Gradle JDK`가 **JDK 17** 또는 **JDK 21**로 설정되어 있는지 확인하세요.

---

문제가 해결되지 않으면 GitHub 이슈에 자세한 증상과 로그를 첨부하여 문의해주세요.
